# Nixpacks configuration for VATpilot Railway deployment
# This file tells Railway to build from the server subdirectory

[build]
cmd = "cd server && npm install --omit=dev"

[start] 
cmd = "cd server && node railway-start.js"

[variables]
NODE_ENV = "production"

# Force Railway to inject service environment variables
[phases.setup]
dependsOn = ["install"]

[phases.install]
cmds = ["echo 'Installing dependencies'"]

[phases.build]
dependsOn = ["install"]