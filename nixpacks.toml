# Nixpacks configuration for VATpilot deployment
# This file tells the platform to build from the server subdirectory

[build]
cmd = "cd server && npm install --omit=dev"

[start] 
cmd = "cd server && npm start"

[variables]
NODE_ENV = "production"

# Force Railway to inject service environment variables
[phases.setup]
dependsOn = ["install"]

[phases.install]
cmds = ["echo 'Installing dependencies'"]

[phases.build]
dependsOn = ["install"]